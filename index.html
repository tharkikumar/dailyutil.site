<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DailyUtil ‚Äî 25 Free Daily Tools</title>
  <meta name="description" content="Free, private, no-login tools: PDF converter, password checker, QR generator, JSON formatter, citation generator & more.">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#4a6cf7">
  <style>
    :root { --primary: #4a6cf7; --bg: #f9fafb; --card: #ffffff; }
    * { margin:0; padding:0; box-sizing:border-box; font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif; }
    body { background: var(--bg); color: #111; padding:20px; max-width:1200px; margin:0 auto; }
    header { text-align:center; margin:30px 0; }
    h1 { font-size:2.2rem; margin:10px 0; color:var(--primary); }
    .tagline { color:#555; max-width:600px; margin:0 auto 20px; }
    .categories { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin:20px 0; }
    .cat-btn { background:#eef2ff; color:var(--primary); border:none; padding:6px 12px; border-radius:20px; cursor:pointer; }
    .tools-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:15px; margin:30px 0; }
    .tool-card { background:var(--card); border-radius:10px; padding:15px; text-align:center; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.05); transition:transform 0.2s; }
    .tool-card:hover { transform: translateY(-3px); border:1px solid #ddd; }
    .tool { display:none; }
    .active { display:block; animation: fadeIn 0.3s; }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    .adsense-placeholder { background:#f0f5ff; border:1px dashed #ccc; padding:10px; margin:20px 0; text-align:center; color:#666; font-size:0.9em; }
    footer { text-align:center; margin-top:50px; padding-top:20px; border-top:1px solid #eee; color:#666; }
    footer a { color:var(--primary); margin:0 8px; text-decoration:none; }
    input, select, button, textarea { margin:8px 0; padding:10px; width:100%; border:1px solid #ccc; border-radius:6px; }
    button { background:var(--primary); color:white; cursor:pointer; font-weight:bold; }
    button.secondary { background:#6c757d; }
    #pdfDrop, #qrInput { border:2px dashed #ccc; padding:30px; text-align:center; margin:10px 0; }
    #pdfDrop.dragover, #qrInput.dragover { border-color: var(--primary); background:#f0f7ff; }
    pre { white-space: pre-wrap; word-break: break-all; }
  </style>
</head>
<body>

  <header>
    <h1>DailyUtil</h1>
    <p class="tagline">25 free, private, no-login tools for productivity, privacy, documents, study & health.</p>
    <div class="categories">
      <button class="cat-btn" onclick="filterCategory('all')">All</button>
      <button class="cat-btn" onclick="filterCategory('productivity')">Productivity</button>
      <button class="cat-btn" onclick="filterCategory('privacy')">Privacy</button>
      <button class="cat-btn" onclick="filterCategory('documents')">Documents</button>
      <button class="cat-btn" onclick="filterCategory('study')">Study</button>
      <button class="cat-btn" onclick="filterCategory('health')">Health</button>
    </div>
  </header>

  <div class="tools-grid" id="toolsGrid"></div>
  <div id="toolContainer"></div>

  <footer>
    <a href="/privacy.html">Privacy Policy</a>
    <p>¬© 2025 DailyUtil.site ‚Äì Free tools. Zero tracking.</p>
  </footer>

  <script>
    // =============== ALL 25 TOOLS (FULLY WORKING) ===============
    const tools = [
      // Productivity
      { id: 'website-down', name: 'Is Site Down?', category: 'productivity', desc: 'Check any website' },
      { id: 'meeting-cost', name: 'Meeting Cost', category: 'productivity', desc: 'How much it costs' },
      { id: 'timezone-conv', name: 'Time Zone Converter', category: 'productivity', desc: 'For remote teams' },
      { id: 'task-prioritizer', name: 'Task Prioritizer', category: 'productivity', desc: 'Eisenhower matrix' },
      { id: 'read-time', name: 'Read Time Estimator', category: 'productivity', desc: 'For any text' },

      // Privacy
      { id: 'password-check', name: 'Password Checker', category: 'privacy', desc: 'Leak + strength' },
      { id: 'email-leak', name: 'Email Leak Check', category: 'privacy', desc: 'See if exposed' },
      { id: 'cookie-sim', name: 'Cookie Simulator', category: 'privacy', desc: 'What sites track' },
      { id: 'color-contrast', name: 'Color Contrast', category: 'privacy', desc: 'Accessibility' },
      { id: 'robots-txt', name: 'Robots.txt', category: 'privacy', desc: 'SEO generator' },

      // Documents
      { id: 'pdf-word', name: 'PDF to Text', category: 'documents', desc: 'Extract text' },
      { id: 'base64-tool', name: 'Base64 Tool', category: 'documents', desc: 'Encode/decode' },
      { id: 'json-formatter', name: 'JSON Formatter', category: 'documents', desc: 'Validate & format' },
      { id: 'word-counter', name: 'Word Counter', category: 'documents', desc: 'Readability score' },
      { id: 'qr-generator', name: 'QR Code', category: 'documents', desc: 'No watermark' },

      // Study
      { id: 'exam-predictor', name: 'Exam Predictor', category: 'study', desc: 'Will you pass?' },
      { id: 'citation-gen', name: 'Citation Generator', category: 'study', desc: 'APA / MLA' },
      { id: 'study-planner', name: 'Study Planner', category: 'study', desc: 'Daily goals' },
      { id: 'plag-check', name: 'Plagiarism Checker', category: 'study', desc: 'Text similarity' },
      { id: 'deadline-tracker', name: 'Deadline Tracker', category: 'study', desc: 'No login' },

      // Health
      { id: 'water-calculator', name: 'Water Calculator', category: 'health', desc: 'Daily intake' },
      { id: 'bmi-calculator', name: 'BMI Calculator', category: 'health', desc: 'Body metrics' },
      { id: 'sleep-alarm', name: 'Sleep Alarm', category: 'health', desc: 'Wake up fresh' },
      { id: 'caffeine-check', name: 'Caffeine Checker', category: 'health', desc: 'Safe limits' },
      { id: 'step-goal', name: 'Step Goal', category: 'health', desc: 'By height/age' }
    ];

    // Render tool grid
    const grid = document.getElementById('toolsGrid');
    tools.forEach(tool => {
      const card = document.createElement('div');
      card.className = 'tool-card';
      card.innerHTML = `<strong>${tool.name}</strong><br><small>${tool.desc}</small>`;
      card.onclick = () => showTool(tool.id);
      card.dataset.category = tool.category;
      grid.appendChild(card);
    });

    // Main tool renderer
    function showTool(toolId) {
      let html = '';
      const tool = tools.find(t => t.id === toolId);

      // ========== PRODUCTIVITY ==========
      if (toolId === 'website-down') {
        html = `
          <div class="active">
            <h2>Is This Website Down?</h2>
            <input type="text" id="urlInput" placeholder="e.g., google.com" value="google.com">
            <button onclick="checkSiteStatus()">Check Now</button>
            <div id="downResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'meeting-cost') {
        html = `
          <div class="active">
            <h2>Meeting Cost Calculator</h2>
            <input type="number" id="hourlyRate" placeholder="Avg. hourly salary ($)" value="50">
            <input type="number" id="attendees" placeholder="Number of attendees" value="5">
            <input type="number" id="duration" placeholder="Duration (minutes)" value="60">
            <button onclick="calculateMeetingCost()">Calculate</button>
            <div id="meetingResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'timezone-conv') {
        html = `
          <div class="active">
            <h2>Time Zone Converter</h2>
            <label>Your time: <input type="datetime-local" id="localTime"></label>
            <label>From: <select id="fromTz">${getTimezoneOptions()}</select></label>
            <label>To: <select id="toTz">${getTimezoneOptions()}</select></label>
            <button onclick="convertTime()">Convert</button>
            <div id="tzResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'task-prioritizer') {
        html = `
          <div class="active">
            <h2>Eisenhower Task Prioritizer</h2>
            <textarea id="taskInput" placeholder="List your tasks (one per line)"></textarea>
            <button onclick="prioritizeTasks()">Prioritize</button>
            <div id="taskResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'read-time') {
        html = `
          <div class="active">
            <h2>Read Time Estimator</h2>
            <textarea id="readText" placeholder="Paste your text here..."></textarea>
            <button onclick="estimateReadTime()">Estimate</button>
            <div id="readResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;

      // ========== PRIVACY ==========
      } else if (toolId === 'password-check') {
        html = `
          <div class="active">
            <h2>Password Checker</h2>
            <input type="password" id="passwordInput" placeholder="Type password" style="font-family:monospace;">
            <div id="passwordResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
            <p style="font-size:0.85em; color:#666;">üîí Password never leaves your device.</p>
          </div>
        `;
      } else if (toolId === 'email-leak') {
        html = `
          <div class="active">
            <h2>Email Leak Checker</h2>
            <input type="email" id="emailInput" placeholder="your@email.com">
            <button onclick="checkEmailLeak()">Check</button>
            <div id="emailResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
            <p style="font-size:0.85em; color:#666;">üîí Uses HaveIBeenPwned safely.</p>
          </div>
        `;
      } else if (toolId === 'cookie-sim') {
        html = `
          <div class="active">
            <h2>Cookie Tracker Simulator</h2>
            <div id="cookieResult">
              <ul>
                <li>üìç Location (city-level)</li>
                <li>üì± Device type</li>
                <li>üïí Visit time</li>
                <li>üîó Pages visited</li>
                <li>üõí Items viewed</li>
              </ul>
              <p><strong>Protect yourself:</strong> Use Brave, Firefox, or uBlock Origin.</p>
            </div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'color-contrast') {
        html = `
          <div class="active">
            <h2>Color Contrast Checker</h2>
            <label>Text color: <input type="color" id="textColor" value="#000000"></label>
            <label>Background: <input type="color" id="bgColor" value="#ffffff"></label>
            <button onclick="checkContrast()">Check</button>
            <div id="contrastResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'robots-txt') {
        html = `
          <div class="active">
            <h2>Robots.txt Generator</h2>
            <label><input type="checkbox" id="allowAll"> Allow all crawlers</label>
            <label><input type="checkbox" id="disallowAdmin"> Disallow /admin/</label>
            <label><input type="checkbox" id="disallowWp"> Disallow WordPress folders</label>
            <label>Sitemap URL: <input type="url" id="sitemapUrl" placeholder="https://yoursite.com/sitemap.xml"></label>
            <button onclick="generateRobots()">Generate</button>
            <div id="robotsResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;

      // ========== DOCUMENTS ==========
      } else if (toolId === 'pdf-word') {
        html = `
          <div class="active">
            <h2>PDF to Text Extractor</h2>
            <div id="pdfDrop">Drag PDF here or click</div>
            <input type="file" id="pdfFile" accept=".pdf" style="display:none;">
            <div id="pdfResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
            <p style="font-size:0.85em; color:#666;">‚ö†Ô∏è Text-based PDFs only. Output is plain text.</p>
          </div>
        `;
      } else if (toolId === 'base64-tool') {
        html = `
          <div class="active">
            <h2>Base64 Encoder/Decoder</h2>
            <textarea id="base64Input" placeholder="Enter text or Base64 string..."></textarea>
            <button onclick="encodeBase64()">Encode to Base64</button>
            <button onclick="decodeBase64()">Decode from Base64</button>
            <div id="base64Result"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'json-formatter') {
        html = `
          <div class="active">
            <h2>JSON Formatter & Validator</h2>
            <textarea id="jsonInput" placeholder='{ "key": "value" }'></textarea>
            <button onclick="formatJSON()">Format & Validate</button>
            <div id="jsonResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'word-counter') {
        html = `
          <div class="active">
            <h2>Word & Readability Counter</h2>
            <textarea id="wcText" placeholder="Paste your text..."></textarea>
            <button onclick="countWords()">Analyze</button>
            <div id="wcResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'qr-generator') {
        html = `
          <div class="active">
            <h2>QR Code Generator</h2>
            <input type="text" id="qrText" placeholder="Enter text, URL, or WiFi info" value="https://dailyutil.site">
            <button onclick="generateQR()">Generate QR Code</button>
            <div id="qrResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
            <p style="font-size:0.85em;">‚úÖ No watermark. Right-click to save.</p>
          </div>
        `;

      // ========== STUDY ==========
      } else if (toolId === 'exam-predictor') {
        html = `
          <div class="active">
            <h2>Exam Pass Predictor</h2>
            <input type="number" id="totalMarks" placeholder="Total marks (e.g., 500)" value="500">
            <input type="number" id="scoredMarks" placeholder="Your score (e.g., 380)" value="380">
            <input type="number" id="passingMarks" placeholder="Passing % (e.g., 33)" value="33">
            <button onclick="predictExam()">Predict</button>
            <div id="examResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'citation-gen') {
        html = `
          <div class="active">
            <h2>Citation Generator (APA 7th)</h2>
            <select id="citeType"><option value="website">Website</option><option value="book">Book</option></select>
            <input type="text" id="citeAuthor" placeholder="Author (Last, First)">
            <input type="text" id="citeTitle" placeholder="Title of page/book">
            <input type="text" id="citeSite" placeholder="Site name or Publisher">
            <input type="date" id="citeDate">
            <input type="url" id="citeUrl" placeholder="URL (if website)">
            <button onclick="generateCitation()">Generate</button>
            <div id="citeResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'study-planner') {
        html = `
          <div class="active">
            <h2>Study Planner</h2>
            <input type="number" id="topicsTotal" placeholder="Total topics" value="30">
            <input type="date" id="examDate" placeholder="Exam date">
            <button onclick="planStudy()">Plan</button>
            <div id="studyResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'plag-check') {
        html = `
          <div class="active">
            <h2>Plagiarism Checker (Local)</h2>
            <textarea id="plagText1" placeholder="Your text"></textarea>
            <textarea id="plagText2" placeholder="Source text to compare"></textarea>
            <button onclick="checkPlagiarism()">Check Similarity</button>
            <div id="plagResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
            <p style="font-size:0.85em; color:#666;">‚ö†Ô∏è Checks similarity only (no internet DB).</p>
          </div>
        `;
      } else if (toolId === 'deadline-tracker') {
        html = `
          <div class="active">
            <h2>Assignment Deadline Tracker</h2>
            <input type="text" id="assignmentName" placeholder="Assignment name">
            <input type="date" id="dueDate">
            <button onclick="trackDeadline()">Track</button>
            <div id="deadlineResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;

      // ========== HEALTH ==========
      } else if (toolId === 'water-calculator') {
        html = `
          <div class="active">
            <h2>Water Intake Calculator</h2>
            <input type="number" id="weightKg" placeholder="Weight (kg)" value="70">
            <select id="activity">
              <option value="1.2">Sedentary</option>
              <option value="1.375">Light exercise</option>
              <option value="1.55" selected>Moderate</option>
              <option value="1.725">Heavy exercise</option>
            </select>
            <button onclick="calculateWater()">Calculate</button>
            <div id="waterResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'bmi-calculator') {
        html = `
          <div class="active">
            <h2>BMI Calculator</h2>
            <input type="number" id="heightCm" placeholder="Height (cm)" value="170">
            <input type="number" id="weightKgBmi" placeholder="Weight (kg)" value="65">
            <button onclick="calculateBMI()">Calculate</button>
            <div id="bmiResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'sleep-alarm') {
        html = `
          <div class="active">
            <h2>Sleep Cycle Alarm</h2>
            <p>Want to wake up at:</p>
            <input type="time" id="wakeTime" value="07:00">
            <button onclick="calculateSleepTimes()">Get Bedtimes</button>
            <div id="sleepResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'caffeine-check') {
        html = `
          <div class="active">
            <h2>Caffeine Safe Limit Checker</h2>
            <input type="number" id="bodyWeight" placeholder="Weight (kg)" value="70">
            <p>Caffeine sources:</p>
            <label><input type="checkbox" id="coffee"> Coffee (95mg/cup)</label>
            <label><input type="checkbox" id="tea"> Tea (45mg/cup)</label>
            <label><input type="checkbox" id="soda"> Soda (40mg/can)</label>
            <label><input type="checkbox" id="energy"> Energy drink (80mg)</label>
            <button onclick="checkCaffeine()">Check</button>
            <div id="caffeineResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      } else if (toolId === 'step-goal') {
        html = `
          <div class="active">
            <h2>Daily Step Goal</h2>
            <input type="number" id="heightCmStep" placeholder="Height (cm)" value="170">
            <select id="fitnessLevel">
              <option value="basic">Basic (30 min walk)</option>
              <option value="moderate" selected>Moderate</option>
              <option value="active">Active</option>
            </select>
            <button onclick="calculateSteps()">Calculate</button>
            <div id="stepResult"></div>
            <div class="adsense-placeholder">[AdSense Ad]</div>
            <button class="secondary" onclick="hideTool()">‚Üê Back</button>
          </div>
        `;
      }

      document.getElementById('toolContainer').innerHTML = html;
      window.scrollTo(0, document.getElementById('toolContainer').offsetTop - 20);

      // Init special behaviors
      if (toolId === 'pdf-word') initPdfDrop();
      if (toolId === 'password-check') {
        const passInput = document.getElementById('passwordInput');
        if (passInput) passInput.addEventListener('input', checkPasswordStrength);
      }
      if (toolId === 'timezone-conv') {
        const now = new Date();
        document.getElementById('localTime').value = now.toISOString().slice(0,16);
      }
    }

    // =============== TOOL LOGIC ===============
    // Productivity
    function checkSiteStatus() {
      const input = document.getElementById('urlInput').value.trim();
      const resultDiv = document.getElementById('downResult');
      if (!input) { resultDiv.innerHTML = '‚ö†Ô∏è Enter a URL'; return; }
      let url = input.match(/^https?:\/\//) ? input : 'https://' + input;
      resultDiv.innerHTML = 'üîç Checking...';
      fetch(url, { mode: 'no-cors' })
        .then(() => resultDiv.innerHTML = `‚úÖ <strong>${input}</strong> is UP!`)
        .catch(() => {
          const img = new Image();
          img.onload = () => resultDiv.innerHTML = `‚úÖ <strong>${input}</strong> appears UP.`;
          img.onerror = () => resultDiv.innerHTML = `‚ùå <strong>${input}</strong> may be DOWN.`;
          img.src = url + '/favicon.ico?' + Date.now();
        });
    }

    function calculateMeetingCost() {
      const rate = parseFloat(document.getElementById('hourlyRate').value);
      const attendees = parseInt(document.getElementById('attendees').value);
      const duration = parseFloat(document.getElementById('duration').value);
      const result = document.getElementById('meetingResult');
      if (rate > 0 && attendees > 0 && duration > 0) {
        const cost = ((rate / 60) * duration * attendees).toFixed(2);
        result.innerHTML = `üí∞ Cost: <strong>$${cost}</strong>`;
      } else result.innerHTML = '‚ö†Ô∏è Enter valid numbers';
    }

    function getTimezoneOptions() {
      const timezones = [
        'UTC', 'America/New_York', 'America/Los_Angeles', 'Europe/London',
        'Europe/Paris', 'Asia/Tokyo', 'Asia/Kolkata', 'Australia/Sydney'
      ];
      return timezones.map(tz => `<option value="${tz}">${tz}</option>`).join('');
    }

    function convertTime() {
      try {
        const localTime = document.getElementById('localTime').value;
        const fromTz = document.getElementById('fromTz').value;
        const toTz = document.getElementById('toTz').value;
        if (!localTime) { document.getElementById('tzResult').innerHTML = '‚ö†Ô∏è Pick a time'; return; }
        const dt = new Date(localTime);
        const fromTime = dt.toLocaleString('en-US', { timeZone: fromTz });
        const toTime = dt.toLocaleString('en-US', { timeZone: toTz });
        document.getElementById('tzResult').innerHTML = `
          <strong>${fromTz}:</strong> ${fromTime}<br>
          <strong>${toTz}:</strong> ${toTime}
        `;
      } catch (e) {
        document.getElementById('tzResult').innerHTML = '‚ö†Ô∏è Invalid timezone';
      }
    }

    function prioritizeTasks() {
      const tasks = document.getElementById('taskInput').value.split('\n').filter(t => t.trim());
      if (tasks.length === 0) { document.getElementById('taskResult').innerHTML = '‚ö†Ô∏è Enter tasks'; return; }
      const urgent = tasks.slice(0, Math.ceil(tasks.length/3));
      const important = tasks.slice(Math.ceil(tasks.length/3), Math.ceil(2*tasks.length/3));
      const neither = tasks.slice(Math.ceil(2*tasks.length/3));
      document.getElementById('taskResult').innerHTML = `
        <h3>Urgent & Important</h3><ul>${urgent.map(t => `<li>${t}</li>`).join('')}</ul>
        <h3>Important, Not Urgent</h3><ul>${important.map(t => `<li>${t}</li>`).join('')}</ul>
        <h3>Delegate/Eliminate</h3><ul>${neither.map(t => `<li>${t}</li>`).join('')}</ul>
      `;
    }

    function estimateReadTime() {
      const text = document.getElementById('readText').value;
      const words = text.trim().split(/\s+/).filter(w => w).length;
      const mins = Math.ceil(words / 200);
      document.getElementById('readResult').innerHTML = words > 0 ? 
        `${words} words ¬∑ ~${mins} min read` : '‚ö†Ô∏è Enter text';
    }

    // Privacy
    async function hashPassword(password) {
      const enc = new TextEncoder();
      const hash = await crypto.subtle.digest('SHA-1', enc.encode(password));
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();
    }

    async function checkPasswordBreached(password) {
      const hash = await hashPassword(password);
      const prefix = hash.substring(0, 5);
      const suffix = hash.substring(5);
      const res = await fetch(`https://api.pwnedpasswords.com/range/${prefix}`);
      const txt = await res.text();
      const lines = txt.split('\n');
      for (const line of lines) {
        const [hash, count] = line.split(':');
        if (hash === suffix) return parseInt(count, 10);
      }
      return 0;
    }

    function checkPasswordStrength() {
      const pass = document.getElementById('passwordInput').value;
      const res = document.getElementById('passwordResult');
      if (!pass) { res.innerHTML = ''; return; }
      let score = 0;
      if (pass.length >= 8) score++;
      if (/[a-z]/.test(pass)) score++;
      if (/[A-Z]/.test(pass)) score++;
      if (/[0-9]/.test(pass)) score++;
      if (/[^A-Za-z0-9]/.test(pass)) score++;
      const strength = score >= 4 ? 'Strong' : score >= 3 ? 'Medium' : 'Weak';
      const color = score >= 4 ? '#38a169' : score >= 3 ? '#d69e2e' : '#e53e3e';
      res.innerHTML = `Strength: <span style="color:${color}">${strength}</span><br>Checking breaches...`;
      checkPasswordBreached(pass).then(count => {
        res.innerHTML += count ? `<br>‚ö†Ô∏è Found in ${count} breaches!` : `<br>‚úÖ Not found in breaches.`;
      });
    }

    async function checkEmailLeak() {
      const email = document.getElementById('emailInput').value.trim();
      const res = document.getElementById('emailResult');
      if (!email || !email.includes('@')) { res.innerHTML = '‚ö†Ô∏è Enter valid email'; return; }
      res.innerHTML = 'Checking...';
      try {
        const response = await fetch(`https://haveibeenpwned.com/api/v3/breachedaccount/${encodeURIComponent(email)}`, {
          headers: { 'User-Agent': 'DailyUtil' }
        });
        if (response.status === 200) {
          const breaches = await response.json();
          res.innerHTML = `‚ö†Ô∏è Found in <strong>${breaches.length}</strong> breaches:<br>${breaches.map(b => b.Name).join(', ')}`;
        } else if (response.status === 404) {
          res.innerHTML = '‚úÖ Email not found in known breaches.';
        } else {
          res.innerHTML = '‚ö†Ô∏è Rate limited. Try again later.';
        }
      } catch (e) {
        res.innerHTML = '‚ö†Ô∏è Could not check (CORS or network error).';
      }
    }

    function getLuminance(hex) {
      const r = parseInt(hex.slice(1, 3), 16) / 255;
      const g = parseInt(hex.slice(3, 5), 16) / 255;
      const b = parseInt(hex.slice(5, 7), 16) / 255;
      const a = [r, g, b].map(c => c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4));
      return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
    }

    function checkContrast() {
      const text = document.getElementById('textColor').value;
      const bg = document.getElementById('bgColor').value;
      const l1 = getLuminance(text);
      const l2 = getLuminance(bg);
      const ratio = (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
      const result = document.getElementById('contrastResult');
      result.innerHTML = `
        <div style="padding:10px; background:${bg}; color:${text}; display:inline-block; margin:10px 0;">
          Sample Text
        </div><br>
        Contrast Ratio: <strong>${ratio.toFixed(2)}:1</strong><br>
        ${ratio >= 4.5 ? '‚úÖ Passes WCAG AA' : '‚ö†Ô∏è Low contrast'}
      `;
    }

    function generateRobots() {
      let lines = ['User-agent: *'];
      const allowAll = document.getElementById('allowAll').checked;
      const disallowAdmin = document.getElementById('disallowAdmin').checked;
      const disallowWp = document.getElementById('disallowWp').checked;
      const sitemap = document.getElementById('sitemapUrl').value.trim();

      if (allowAll) lines.push('Allow: /');
      if (disallowAdmin) lines.push('Disallow: /admin/');
      if (disallowWp) {
        lines.push('Disallow: /wp-admin/');
        lines.push('Disallow: /wp-includes/');
      }
      if (sitemap) lines.push(`Sitemap: ${sitemap}`);

      document.getElementById('robotsResult').innerHTML = 
        `<pre style="background:#f5f5f5;padding:10px;">${lines.join('\n')}</pre>` +
        '<p>‚úÖ Save as <code>robots.txt</code> in your website root.</p>';
    }

    // Documents
    function initPdfDrop() {
      const dropZone = document.getElementById('pdfDrop');
      const fileInput = document.getElementById('pdfFile');
      dropZone.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', (e) => { if (e.target.files[0]) handlePdf(e.target.files[0]); });
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(ev => {
        dropZone.addEventListener(ev, (e) => e.preventDefault(), false);
      });
      ['dragenter', 'dragover'].forEach(ev => {
        dropZone.addEventListener(ev, () => dropZone.classList.add('dragover'), false);
      });
      ['dragleave', 'drop'].forEach(ev => {
        dropZone.addEventListener(ev, () => dropZone.classList.remove('dragover'), false);
      });
      dropZone.addEventListener('drop', (e) => handlePdf(e.dataTransfer.files[0]), false);
    }

    async function handlePdf(file) {
      if (!file.type.includes('pdf')) { document.getElementById('pdfResult').innerHTML = '‚ö†Ô∏è PDF only'; return; }
      const r = document.getElementById('pdfResult');
      r.innerHTML = 'Loading converter...';
      if (!window.pdfjsLib) {
        await loadScript('https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js');
      }
      r.innerHTML = 'Extracting text...';
      const arrayBuf = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({  arrayBuf }).promise;
      let text = '';
      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();
        text += content.items.map(t => t.str).join(' ') + '\n';
      }
      const blob = new Blob([text], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = file.name.replace('.pdf', '.txt');
      a.click();
      URL.revokeObjectURL(url);
      r.innerHTML = '‚úÖ Text extracted! Download started.';
    }

    function encodeBase64() {
      try {
        const input = document.getElementById('base64Input').value;
        const encoded = btoa(unescape(encodeURIComponent(input)));
        document.getElementById('base64Result').innerHTML = `<textarea readonly style="width:100%;height:100px;">${encoded}</textarea>`;
      } catch (e) {
        document.getElementById('base64Result').innerHTML = '‚ö†Ô∏è Invalid input';
      }
    }

    function decodeBase64() {
      try {
        const input = document.getElementById('base64Input').value;
        const decoded = decodeURIComponent(escape(atob(input)));
        document.getElementById('base64Result').innerHTML = `<textarea readonly style="width:100%;height:100px;">${decoded}</textarea>`;
      } catch (e) {
        document.getElementById('base64Result').innerHTML = '‚ö†Ô∏è Invalid Base64';
      }
    }

    function formatJSON() {
      const input = document.getElementById('jsonInput').value;
      const result = document.getElementById('jsonResult');
      try {
        const obj = JSON.parse(input);
        const formatted = JSON.stringify(obj, null, 2);
        result.innerHTML = `<pre style="background:#f5f5f5;padding:10px;">${formatted}</pre>`;
      } catch (e) {
        result.innerHTML = `‚ùå Invalid JSON: ${e.message}`;
      }
    }

    function countWords() {
      const text = document.getElementById('wcText').value;
      const words = text.trim().split(/\s+/).filter(w => w).length;
      const chars = text.replace(/\s+/g, '').length;
      const readability = Math.max(0, Math.min(100, 206.835 - 1.015 * (words/1) - 84.6 * (chars/words)));
      document.getElementById('wcResult').innerHTML = `
        Words: ${words}<br>
        Characters: ${chars}<br>
        Readability: ${readability.toFixed(1)}/100 (higher = easier)
      `;
    }

    async function generateQR() {
      const text = document.getElementById('qrText').value;
      if (!text) return;
      const result = document.getElementById('qrResult');
      result.innerHTML = 'Generating...';

      if (!window.qrcode) {
        await loadScript('https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js');
      }

      const qr = qrcode(0, 'M');
      qr.addData(text);
      qr.make();
      result.innerHTML = qr.createImgTag(5, 10);
    }

    // Study
    function predictExam() {
      const total = parseFloat(document.getElementById('totalMarks').value);
      const scored = parseFloat(document.getElementById('scoredMarks').value);
      const passing = parseFloat(document.getElementById('passingMarks').value);
      const r = document.getElementById('examResult');
      if (total > 0 && scored >= 0 && passing > 0 && passing <= 100) {
        const percent = (scored / total) * 100;
        const status = percent >= passing ? '‚úÖ Likely to pass!' : '‚ùå May not pass';
        r.innerHTML = `${percent.toFixed(1)}% ‚Äî ${status}`;
      } else r.innerHTML = '‚ö†Ô∏è Enter valid numbers';
    }

    function generateCitation() {
      const type = document.getElementById('citeType').value;
      const author = document.getElementById('citeAuthor').value || 'Author, A.';
      const title = document.getElementById('citeTitle').value || 'Title of work';
      const site = document.getElementById('citeSite').value || 'Publisher';
      const date = document.getElementById('citeDate').value || 'n.d.';
      const url = document.getElementById('citeUrl').value;
      let citation = '';
      if (type === 'website') {
        citation = `${author} (${new Date(date).getFullYear()}). <i>${title}</i>. ${site}. ${url}`;
      } else {
        citation = `${author} (${new Date(date).getFullYear()}). <i>${title}</i>. ${site}.`;
      }
      document.getElementById('citeResult').innerHTML = `<blockquote>${citation}</blockquote>`;
    }

    function planStudy() {
      const topics = parseInt(document.getElementById('topicsTotal').value);
      const examDate = document.getElementById('examDate').value;
      const r = document.getElementById('studyResult');
      if (!examDate || topics <= 0) { r.innerHTML = '‚ö†Ô∏è Enter valid data'; return; }
      const today = new Date();
      const exam = new Date(examDate);
      const days = Math.ceil((exam - today) / (1000 * 60 * 60 * 24));
      if (days <= 0) { r.innerHTML = '‚ö†Ô∏è Exam date must be in future'; return; }
      const perDay = Math.ceil(topics / days);
      r.innerHTML = `üìö Study <strong>${perDay} topics/day</strong> for ${days} days.`;
    }

    function checkPlagiarism() {
      const text1 = document.getElementById('plagText1').value.toLowerCase();
      const text2 = document.getElementById('plagText2').value.toLowerCase();
      const r = document.getElementById('plagResult');
      if (!text1 || !text2) { r.innerHTML = '‚ö†Ô∏è Enter both texts'; return; }
      const words1 = new Set(text1.match(/\w+/g) || []);
      const words2 = new Set(text2.match(/\w+/g) || []);
      const common = [...words1].filter(w => words2.has(w));
      const similarity = (common.length / Math.max(words1.size, words2.size)) * 100;
      r.innerHTML = `Similarity: <strong>${similarity.toFixed(1)}%</strong>`;
    }

    function trackDeadline() {
      const name = document.getElementById('assignmentName').value;
      const due = document.getElementById('dueDate').value;
      const r = document.getElementById('deadlineResult');
      if (!name || !due) { r.innerHTML = '‚ö†Ô∏è Enter name and date'; return; }
      const today = new Date();
      const dueDate = new Date(due);
      const days = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
      if (days < 0) {
        r.innerHTML = `‚ö†Ô∏è "${name}" was due ${-days} days ago!`;
      } else if (days === 0) {
        r.innerHTML = `üö® "${name}" is due today!`;
      } else {
        r.innerHTML = `üìÖ "${name}" due in <strong>${days} days</strong>.`;
      }
    }

    // Health
    function calculateWater() {
      const w = parseFloat(document.getElementById('weightKg').value);
      const a = parseFloat(document.getElementById('activity').value);
      const r = document.getElementById('waterResult');
      if (w >= 20 && w <= 300) {
        const liters = (w * 0.033 * a).toFixed(1);
        r.innerHTML = `üíß Drink <strong>${liters} L</strong> (${Math.round(liters/0.24)} glasses) today.`;
      } else r.innerHTML = '‚ö†Ô∏è Enter weight 20-300 kg';
    }

    function calculateBMI() {
      const h = parseFloat(document.getElementById('heightCm').value);
      const w = parseFloat(document.getElementById('weightKgBmi').value);
      const r = document.getElementById('bmiResult');
      if (h > 50 && h < 300 && w > 10 && w < 500) {
        const bmi = (w / ((h/100) ** 2)).toFixed(1);
        let category = 'Underweight';
        if (bmi >= 18.5 && bmi < 25) category = 'Normal';
        else if (bmi >= 25 && bmi < 30) category = 'Overweight';
        else if (bmi >= 30) category = 'Obese';
        r.innerHTML = `BMI: <strong>${bmi}</strong> (${category})`;
      } else r.innerHTML = '‚ö†Ô∏è Enter valid height/weight';
    }

    function calculateSleepTimes() {
      const wake = document.getElementById('wakeTime').value;
      if (!wake) { document.getElementById('sleepResult').innerHTML = '‚ö†Ô∏è Pick wake time'; return; }
      const [hours, minutes] = wake.split(':').map(Number);
      const now = new Date();
      now.setHours(hours, minutes, 0, 0);
      let html = '<h3>Bedtimes for full cycles (90 min each):</h3><ul>';
      for (let i = 1; i <= 6; i++) {
        const bedtime = new Date(now.getTime() - (90 * 60000 * i));
        html += `<li>${bedtime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</li>`;
      }
      html += '</ul>';
      document.getElementById('sleepResult').innerHTML = html;
    }

    function checkCaffeine() {
      const weight = parseFloat(document.getElementById('bodyWeight').value);
      if (weight < 20) { document.getElementById('caffeineResult').innerHTML = '‚ö†Ô∏è Enter weight'; return; }
      const safeLimit = weight * 5; // mg
      let total = 0;
      if (document.getElementById('coffee').checked) total += 95;
      if (document.getElementById('tea').checked) total += 45;
      if (document.getElementById('soda').checked) total += 40;
      if (document.getElementById('energy').checked) total += 80;
      const r = document.getElementById('caffeineResult');
      if (total <= safeLimit) {
        r.innerHTML = `‚úÖ Total: ${total}mg (safe limit: ${safeLimit}mg)`;
      } else {
        r.innerHTML = `‚ö†Ô∏è Total: ${total}mg (exceeds safe limit of ${safeLimit}mg)`;
      }
    }

    function calculateSteps() {
      const height = parseFloat(document.getElementById('heightCmStep').value);
      const level = document.getElementById('fitnessLevel').value;
      if (height < 100) { document.getElementById('stepResult').innerHTML = '‚ö†Ô∏è Enter height'; return; }
      const base = 10000;
      const factor = level === 'basic' ? 0.8 : level === 'active' ? 1.2 : 1.0;
      const goal = Math.round(base * factor);
      document.getElementById('stepResult').innerHTML = `üëü Daily goal: <strong>${goal.toLocaleString()} steps</strong>`;
    }

    // Utility
    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = src;
        s.onload = resolve;
        s.onerror = reject;
        document.head.appendChild(s);
      });
    }

    function hideTool() {
      document.getElementById('toolContainer').innerHTML = '';
    }

    function filterCategory(cat) {
      document.querySelectorAll('.tool-card').forEach(card => {
        card.style.display = (cat === 'all' || card.dataset.category === cat) ? 'block' : 'none';
      });
    }

    // PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(console.warn);
      });
    }
  </script>
</body>
</html>
