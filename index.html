<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DailyUtil ‚Äî 25 Free Daily Tools</title>
  <meta name="description" content="Free, private, no-login tools: PDF converter, password checker, QR generator, JSON formatter, citation generator & more.">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#4361ee">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #4895ef;
      --secondary: #3f37c9;
      --success: #4cc9f0;
      --light: #f8f9fa;
      --dark: #212529;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
      --border-radius: 12px;
      --spacing: 24px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    }

    body {
      background-color: #fafbff;
      color: var(--dark);
      line-height: 1.6;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin: 40px 0 30px;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 12px;
    }

    .tagline {
      color: #495057;
      font-size: 1.1rem;
      max-width: 650px;
      margin: 0 auto 24px;
    }

    .categories {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: var(--spacing);
    }

    .cat-btn {
      background: white;
      color: var(--primary);
      border: 2px solid var(--primary);
      padding: 8px 18px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .cat-btn:hover, .cat-btn.active {
      background: var(--primary);
      color: white;
    }

    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .tool-card {
      background: white;
      border-radius: var(--border-radius);
      padding: 20px;
      text-align: center;
      cursor: pointer;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      border: 1px solid var(--light-gray);
    }

    .tool-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      border-color: var(--primary-light);
    }

    .tool-card h3 {
      font-size: 1.15rem;
      margin-bottom: 8px;
      color: var(--dark);
    }

    .tool-card p {
      font-size: 0.9rem;
      color: var(--gray);
      min-height: 48px;
    }

    .category-badge {
      display: inline-block;
      background: var(--light-gray);
      color: var(--dark);
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 20px;
      margin-top: 10px;
    }

    .active-tool {
      background: white;
      border-radius: var(--border-radius);
      padding: 30px;
      margin: 30px 0;
      box-shadow: var(--card-shadow);
    }

    .tool-header {
      margin-bottom: 24px;
    }

    .tool-header h2 {
      font-size: 2rem;
      color: var(--primary);
      margin-bottom: 8px;
    }

    .tool-header p {
      color: #666;
      font-size: 1.05rem;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark);
      font-size: 1rem;
    }

    .form-control {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid #ced4da;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
    }

    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn:hover {
      background: var(--secondary);
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
    }

    .result-box {
      background: #f0f4ff;
      border-left: 4px solid var(--primary);
      padding: 16px;
      border-radius: 0 8px 8px 0;
      margin: 20px 0;
      font-size: 1.1rem;
    }

    .result-box.error {
      background: #ffebee;
      border-left-color: #e53e3e;
      color: #c53030;
    }

    .result-box.success {
      color: #2f855a;
    }

    .adsense-placeholder {
      background: #f8f9fa;
      border: 1px dashed #ced4da;
      padding: 16px;
      margin: 24px 0;
      text-align: center;
      color: var(--gray);
      border-radius: 8px;
      font-size: 0.95rem;
    }

    footer {
      text-align: center;
      margin-top: 60px;
      padding-top: 24px;
      border-top: 1px solid var(--light-gray);
      color: var(--gray);
      font-size: 0.95rem;
    }

    footer a {
      color: var(--primary);
      text-decoration: none;
      margin: 0 8px;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    .drop-zone {
      border: 2px dashed #ced4da;
      border-radius: 8px;
      padding: 32px 20px;
      text-align: center;
      margin: 16px 0;
      transition: all 0.2s;
      cursor: pointer;
    }

    .drop-zone.dragover {
      border-color: var(--primary);
      background: #f0f4ff;
    }

    .tool-icon {
      font-size: 24px;
      margin-bottom: 12px;
      color: var(--primary);
    }

    textarea.form-control {
      min-height: 120px;
      resize: vertical;
    }

    @media (max-width: 768px) {
      .tools-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .active-tool {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1><i class="fas fa-toolbox"></i> DailyUtil</h1>
    <p class="tagline">25 free, private, no-login tools for productivity, privacy, documents, study & health.</p>
    <div class="categories">
      <button class="cat-btn active" data-category="all"><i class="fas fa-th-large"></i> All</button>
      <button class="cat-btn" data-category="productivity"><i class="fas fa-bolt"></i> Productivity</button>
      <button class="cat-btn" data-category="privacy"><i class="fas fa-shield-alt"></i> Privacy</button>
      <button class="cat-btn" data-category="documents"><i class="fas fa-file-alt"></i> Documents</button>
      <button class="cat-btn" data-category="study"><i class="fas fa-graduation-cap"></i> Study</button>
      <button class="cat-btn" data-category="health"><i class="fas fa-heartbeat"></i> Health</button>
    </div>
  </header>

  <div class="tools-grid" id="toolsGrid"></div>
  <div id="toolContainer"></div>

  <footer>
    <a href="/privacy.html">Privacy Policy</a>
    <p>¬© 2025 DailyUtil.site ‚Äì Free tools. Zero tracking.</p>
  </footer>

  <script>
    const tools = [
      // Productivity
      { id: 'website-down', name: 'Is Site Down?', category: 'productivity', desc: 'Check if a website is down for everyone or just you.', icon: 'fas fa-signal' },
      { id: 'meeting-cost', name: 'Meeting Cost', category: 'productivity', desc: 'Calculate how much your team meeting really costs.', icon: 'fas fa-dollar-sign' },
      { id: 'timezone-conv', name: 'Time Zone Converter', category: 'productivity', desc: 'Convert time between time zones for remote teams.', icon: 'fas fa-globe' },
      { id: 'task-prioritizer', name: 'Task Prioritizer', category: 'productivity', desc: 'Organize tasks using the Eisenhower Matrix.', icon: 'fas fa-tasks' },
      { id: 'read-time', name: 'Read Time Estimator', category: 'productivity', desc: 'Estimate reading time for any text.', icon: 'fas fa-clock' },

      // Privacy
      { id: 'password-check', name: 'Password Checker', category: 'privacy', desc: 'Check password strength and breach status.', icon: 'fas fa-key' },
      { id: 'email-leak', name: 'Email Leak Check', category: 'privacy', desc: 'See if your email was exposed in data breaches.', icon: 'fas fa-envelope' },
      { id: 'cookie-sim', name: 'Cookie Simulator', category: 'privacy', desc: 'See what websites typically track about you.', icon: 'fas fa-cookie' },
      { id: 'color-contrast', name: 'Color Contrast', category: 'privacy', desc: 'Check accessibility of text/background colors.', icon: 'fas fa-adjust' },
      { id: 'robots-txt', name: 'Robots.txt', category: 'privacy', desc: 'Generate a robots.txt file for your website.', icon: 'fas fa-robot' },

      // Documents
      { id: 'pdf-word', name: 'PDF to Text', category: 'documents', desc: 'Extract text from PDF files (client-side).', icon: 'fas fa-file-pdf' },
      { id: 'base64-tool', name: 'Base64 Tool', category: 'documents', desc: 'Encode or decode Base64 strings.', icon: 'fas fa-code' },
      { id: 'json-formatter', name: 'JSON Formatter', category: 'documents', desc: 'Validate and format JSON data.', icon: 'fas fa-brackets-curly' },
      { id: 'word-counter', name: 'Word Counter', category: 'documents', desc: 'Count words, characters, and readability score.', icon: 'fas fa-font' },
      { id: 'qr-generator', name: 'QR Code', category: 'documents', desc: 'Generate QR codes with no watermark.', icon: 'fas fa-qrcode' },

      // Study
      { id: 'exam-predictor', name: 'Exam Predictor', category: 'study', desc: 'Predict if you‚Äôll pass based on your score.', icon: 'fas fa-chart-line' },
      { id: 'citation-gen', name: 'Citation Generator', category: 'study', desc: 'Generate APA/MLA citations instantly.', icon: 'fas fa-quote-right' },
      { id: 'study-planner', name: 'Study Planner', category: 'study', desc: 'Create a daily study plan before exams.', icon: 'fas fa-calendar-day' },
      { id: 'plag-check', name: 'Plagiarism Checker', category: 'study', desc: 'Check text similarity (local only).', icon: 'fas fa-file-contract' },
      { id: 'deadline-tracker', name: 'Deadline Tracker', category: 'study', desc: 'Track assignment deadlines with countdown.', icon: 'fas fa-hourglass-half' },

      // Health
      { id: 'water-calculator', name: 'Water Calculator', category: 'health', desc: 'Calculate your ideal daily water intake.', icon: 'fas fa-tint' },
      { id: 'bmi-calculator', name: 'BMI Calculator', category: 'health', desc: 'Check your Body Mass Index and category.', icon: 'fas fa-weight' },
      { id: 'sleep-alarm', name: 'Sleep Alarm', category: 'health', desc: 'Find ideal bedtimes for a full sleep cycle.', icon: 'fas fa-moon' },
      { id: 'caffeine-check', name: 'Caffeine Checker', category: 'health', desc: 'Check if your caffeine intake is safe.', icon: 'fas fa-coffee' },
      { id: 'step-goal', name: 'Step Goal', category: 'health', desc: 'Calculate your daily step goal by height.', icon: 'fas fa-shoe-prints' }
    ];

    // Render tool grid
    const grid = document.getElementById('toolsGrid');
    const categoryColors = {
      productivity: '#4895ef',
      privacy: '#7209b7',
      documents: '#3a86ff',
      study: '#ff9e00',
      health: '#06d6a0'
    };

    tools.forEach(tool => {
      const card = document.createElement('div');
      card.className = 'tool-card';
      const color = categoryColors[tool.category] || '#6c757d';
      card.innerHTML = `
        <div class="tool-icon">
          <i class="${tool.icon}"></i>
        </div>
        <h3>${tool.name}</h3>
        <p>${tool.desc}</p>
        <div class="category-badge" style="background:${color}20; color:${color}; border:1px solid ${color}40;">
          ${tool.category.charAt(0).toUpperCase() + tool.category.slice(1)}
        </div>
      `;
      card.onclick = () => showTool(tool.id);
      card.dataset.category = tool.category;
      grid.appendChild(card);
    });

    // Category filtering
    document.querySelectorAll('.cat-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const category = btn.dataset.category;
        document.querySelectorAll('.tool-card').forEach(card => {
          if (category === 'all' || card.dataset.category === category) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });

    // Main tool renderer ‚Äî FULLY DETAILED FOR ALL 25
    function showTool(toolId) {
      const tool = tools.find(t => t.id === toolId);
      if (!tool) return;

      let html = '';

      switch(toolId) {
        case 'website-down':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-signal"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="urlInput">Website URL</label>
                <input type="text" id="urlInput" class="form-control" placeholder="e.g., google.com" value="google.com">
                <small class="form-text">Enter domain or full URL (https:// is optional)</small>
              </div>
              <button class="btn" onclick="checkSiteStatus()"><i class="fas fa-search"></i> Check Status</button>
              <div id="downResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'meeting-cost':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-dollar-sign"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="hourlyRate">Average Hourly Salary ($)</label>
                <input type="number" id="hourlyRate" class="form-control" value="50" min="1">
              </div>
              <div class="form-group">
                <label for="attendees">Number of Attendees</label>
                <input type="number" id="attendees" class="form-control" value="5" min="1">
              </div>
              <div class="form-group">
                <label for="duration">Meeting Duration (minutes)</label>
                <input type="number" id="duration" class="form-control" value="60" min="1">
              </div>
              <button class="btn" onclick="calculateMeetingCost()"><i class="fas fa-calculator"></i> Calculate Cost</button>
              <div id="meetingResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'timezone-conv':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-globe"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="localTime">Your Local Time</label>
                <input type="datetime-local" id="localTime" class="form-control">
              </div>
              <div class="form-group">
                <label for="fromTz">From Time Zone</label>
                <select id="fromTz" class="form-control">${getTimezoneOptions()}</select>
              </div>
              <div class="form-group">
                <label for="toTz">To Time Zone</label>
                <select id="toTz" class="form-control">${getTimezoneOptions()}</select>
              </div>
              <button class="btn" onclick="convertTime()"><i class="fas fa-exchange-alt"></i> Convert Time</button>
              <div id="tzResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'task-prioritizer':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-tasks"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="taskInput">Your Tasks (one per line)</label>
                <textarea id="taskInput" class="form-control" placeholder="Write report&#10;Call client&#10;Review design"></textarea>
              </div>
              <button class="btn" onclick="prioritizeTasks()"><i class="fas fa-sort-amount-down"></i> Prioritize Tasks</button>
              <div id="taskResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'read-time':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-clock"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="readText">Text to Analyze</label>
                <textarea id="readText" class="form-control" placeholder="Paste your article, blog post, or document here..."></textarea>
              </div>
              <button class="btn" onclick="estimateReadTime()"><i class="fas fa-eye"></i> Estimate Read Time</button>
              <div id="readResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'password-check':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-key"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="passwordInput">Password to Check</label>
                <input type="password" id="passwordInput" class="form-control" placeholder="Enter your password">
                <small class="form-text">üîí Your password is never sent to any server. We use k-anonymity with HaveIBeenPwned.</small>
              </div>
              <div id="passwordResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'email-leak':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-envelope"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="emailInput">Email Address to Check</label>
                <input type="email" id="emailInput" class="form-control" placeholder="your.name@example.com">
                <small class="form-text">üîí We check against public breach databases using safe API calls.</small>
              </div>
              <button class="btn" onclick="checkEmailLeak()"><i class="fas fa-search"></i> Check for Breaches</button>
              <div id="emailResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'cookie-sim':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-cookie"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="result-box">
                <h3>Typical Website Tracking Includes:</h3>
                <ul style="text-align:left; margin-top:12px; padding-left:20px;">
                  <li><strong>üìç Location</strong>: City-level geographic data</li>
                  <li><strong>üì± Device Info</strong>: Browser, OS, screen size</li>
                  <li><strong>üïí Behavior</strong>: Pages visited, time spent, clicks</li>
                  <li><strong>üõí Interests</strong>: Products viewed, ads clicked</li>
                  <li><strong>üîÑ Cross-site</strong>: Tracking across other websites</li>
                </ul>
                <p style="margin-top:16px;"><strong>Protect yourself:</strong> Use Firefox, Brave, or uBlock Origin.</p>
              </div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'color-contrast':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-adjust"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="textColor">Text Color</label>
                <input type="color" id="textColor" class="form-control" value="#000000">
              </div>
              <div class="form-group">
                <label for="bgColor">Background Color</label>
                <input type="color" id="bgColor" class="form-control" value="#ffffff">
              </div>
              <button class="btn" onclick="checkContrast()"><i class="fas fa-palette"></i> Check Contrast</button>
              <div id="contrastResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'robots-txt':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-robot"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label><input type="checkbox" id="allowAll"> Allow all crawlers to access all pages</label>
              </div>
              <div class="form-group">
                <label><input type="checkbox" id="disallowAdmin"> Disallow access to /admin/ directory</label>
              </div>
              <div class="form-group">
                <label><input type="checkbox" id="disallowWp"> Disallow WordPress system folders</label>
              </div>
              <div class="form-group">
                <label for="sitemapUrl">Sitemap URL (optional)</label>
                <input type="url" id="sitemapUrl" class="form-control" placeholder="https://yoursite.com/sitemap.xml">
              </div>
              <button class="btn" onclick="generateRobots()"><i class="fas fa-file-code"></i> Generate robots.txt</button>
              <div id="robotsResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'pdf-word':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-file-pdf"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label>Upload PDF File</label>
                <div id="pdfDrop" class="drop-zone">
                  <i class="fas fa-file-upload fa-2x"></i>
                  <p>Drag & drop your PDF here<br>or click to browse</p>
                </div>
                <input type="file" id="pdfFile" accept=".pdf" style="display:none;">
                <small class="form-text">‚ö†Ô∏è Works best with text-based PDFs (not scanned images). Your file never leaves your browser.</small>
              </div>
              <div id="pdfResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'base64-tool':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-code"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="base64Input">Text or Base64 String</label>
                <textarea id="base64Input" class="form-control" placeholder="Enter plain text to encode, or Base64 to decode..."></textarea>
              </div>
              <button class="btn" onclick="encodeBase64()"><i class="fas fa-lock"></i> Encode to Base64</button>
              <button class="btn" style="background:#4CAF50;margin-left:8px;" onclick="decodeBase64()"><i class="fas fa-unlock"></i> Decode from Base64</button>
              <div id="base64Result"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'json-formatter':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-brackets-curly"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="jsonInput">JSON Data to Format</label>
                <textarea id="jsonInput" class="form-control" placeholder='{ "name": "John", "age": 30 }'></textarea>
              </div>
              <button class="btn" onclick="formatJSON()"><i class="fas fa-indent"></i> Format & Validate JSON</button>
              <div id="jsonResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'word-counter':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-font"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="wcText">Text to Analyze</label>
                <textarea id="wcText" class="form-control" placeholder="Paste your essay, article, or report here..."></textarea>
              </div>
              <button class="btn" onclick="countWords()"><i class="fas fa-calculator"></i> Analyze Text</button>
              <div id="wcResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'qr-generator':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-qrcode"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="qrText">Text to Encode</label>
                <input type="text" id="qrText" class="form-control" value="https://dailyutil.site" placeholder="URL, contact info, WiFi password, etc.">
                <small class="form-text">‚úÖ No watermark. Right-click the QR code to save as image.</small>
              </div>
              <button class="btn" onclick="generateQR()"><i class="fas fa-qrcode"></i> Generate QR Code</button>
              <div id="qrResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'exam-predictor':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-chart-line"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="totalMarks">Total Marks in Exam</label>
                <input type="number" id="totalMarks" class="form-control" value="500" min="1">
              </div>
              <div class="form-group">
                <label for="scoredMarks">Your Scored Marks</label>
                <input type="number" id="scoredMarks" class="form-control" value="380" min="0">
              </div>
              <div class="form-group">
                <label for="passingMarks">Passing Percentage (%)</label>
                <input type="number" id="passingMarks" class="form-control" value="33" min="1" max="100">
              </div>
              <button class="btn" onclick="predictExam()"><i class="fas fa-graduation-cap"></i> Predict Result</button>
              <div id="examResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'citation-gen':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-quote-right"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="citeType">Source Type</label>
                <select id="citeType" class="form-control">
                  <option value="website">Website</option>
                  <option value="book">Book</option>
                </select>
              </div>
              <div class="form-group">
                <label for="citeAuthor">Author (Last, First)</label>
                <input type="text" id="citeAuthor" class="form-control" placeholder="Smith, John">
              </div>
              <div class="form-group">
                <label for="citeTitle">Title of Work</label>
                <input type="text" id="citeTitle" class="form-control" placeholder="The Art of Productivity">
              </div>
              <div class="form-group">
                <label for="citeSite">Website Name or Publisher</label>
                <input type="text" id="citeSite" class="form-control" placeholder="Harvard University Press">
              </div>
              <div class="form-group">
                <label for="citeDate">Publication Date</label>
                <input type="date" id="citeDate" class="form-control">
              </div>
              <div class="form-group">
                <label for="citeUrl">URL (for websites)</label>
                <input type="url" id="citeUrl" class="form-control" placeholder="https://example.com/article">
              </div>
              <button class="btn" onclick="generateCitation()"><i class="fas fa-file-alt"></i> Generate Citation</button>
              <div id="citeResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'study-planner':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-calendar-day"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="topicsTotal">Total Topics to Study</label>
                <input type="number" id="topicsTotal" class="form-control" value="30" min="1">
              </div>
              <div class="form-group">
                <label for="examDate">Exam Date</label>
                <input type="date" id="examDate" class="form-control">
              </div>
              <button class="btn" onclick="planStudy()"><i class="fas fa-book-open"></i> Create Study Plan</button>
              <div id="studyResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'plag-check':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-file-contract"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="plagText1">Your Text</label>
                <textarea id="plagText1" class="form-control" placeholder="Paste your original content here..."></textarea>
              </div>
              <div class="form-group">
                <label for="plagText2">Source Text to Compare</label>
                <textarea id="plagText2" class="form-control" placeholder="Paste the source you want to check against..."></textarea>
                <small class="form-text">‚ö†Ô∏è This checks word overlap only (no internet database). For educational use.</small>
              </div>
              <button class="btn" onclick="checkPlagiarism()"><i class="fas fa-balance-scale"></i> Check Similarity</button>
              <div id="plagResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'deadline-tracker':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-hourglass-half"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="assignmentName">Assignment Name</label>
                <input type="text" id="assignmentName" class="form-control" placeholder="Final Project">
              </div>
              <div class="form-group">
                <label for="dueDate">Due Date</label>
                <input type="date" id="dueDate" class="form-control">
              </div>
              <button class="btn" onclick="trackDeadline()"><i class="fas fa-bell"></i> Track Deadline</button>
              <div id="deadlineResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'water-calculator':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-tint"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="weightKg">Your Weight (kg)</label>
                <input type="number" id="weightKg" class="form-control" value="70" min="20" max="300">
              </div>
              <div class="form-group">
                <label for="activity">Activity Level</label>
                <select id="activity" class="form-control">
                  <option value="1.2">Sedentary (little or no exercise)</option>
                  <option value="1.375">Light exercise (1-3 days/week)</option>
                  <option value="1.55" selected>Moderate exercise (3-5 days/week)</option>
                  <option value="1.725">Heavy exercise (6-7 days/week)</option>
                </select>
              </div>
              <button class="btn" onclick="calculateWater()"><i class="fas fa-glass-whiskey"></i> Calculate Intake</button>
              <div id="waterResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'bmi-calculator':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-weight"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="heightCm">Height (cm)</label>
                <input type="number" id="heightCm" class="form-control" value="170" min="50" max="300">
              </div>
              <div class="form-group">
                <label for="weightKgBmi">Weight (kg)</label>
                <input type="number" id="weightKgBmi" class="form-control" value="65" min="10" max="500">
              </div>
              <button class="btn" onclick="calculateBMI()"><i class="fas fa-heartbeat"></i> Calculate BMI</button>
              <div id="bmiResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'sleep-alarm':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-moon"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="wakeTime">Desired Wake-Up Time</label>
                <input type="time" id="wakeTime" class="form-control" value="07:00">
                <small class="form-text">We'll calculate ideal bedtimes for full 90-minute sleep cycles.</small>
              </div>
              <button class="btn" onclick="calculateSleepTimes()"><i class="fas fa-bed"></i> Get Bedtimes</button>
              <div id="sleepResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'caffeine-check':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-coffee"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="bodyWeight">Your Weight (kg)</label>
                <input type="number" id="bodyWeight" class="form-control" value="70" min="20" max="200">
              </div>
              <div class="form-group">
                <label>Caffeine Sources Today</label>
                <div style="display:flex;flex-direction:column;gap:8px;">
                  <label><input type="checkbox" id="coffee"> ‚òï Coffee (95mg per cup)</label>
                  <label><input type="checkbox" id="tea"> ü´ñ Tea (45mg per cup)</label>
                  <label><input type="checkbox" id="soda"> ü•§ Soda (40mg per can)</label>
                  <label><input type="checkbox" id="energy"> ‚ö° Energy drink (80mg)</label>
                </div>
              </div>
              <button class="btn" onclick="checkCaffeine()"><i class="fas fa-heart-pulse"></i> Check Safety</button>
              <div id="caffeineResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        case 'step-goal':
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="fas fa-shoe-prints"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="form-group">
                <label for="heightCmStep">Your Height (cm)</label>
                <input type="number" id="heightCmStep" class="form-control" value="170" min="100" max="250">
              </div>
              <div class="form-group">
                <label for="fitnessLevel">Fitness Level</label>
                <select id="fitnessLevel" class="form-control">
                  <option value="basic">Basic (30 min walk/day)</option>
                  <option value="moderate" selected>Moderate (regular exercise)</option>
                  <option value="active">Active (daily intense activity)</option>
                </select>
              </div>
              <button class="btn" onclick="calculateSteps()"><i class="fas fa-running"></i> Calculate Goal</button>
              <div id="stepResult"></div>
              <div class="adsense-placeholder">[AdSense Ad Unit]</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
          break;

        default:
          html = `
            <div class="active-tool">
              <div class="tool-header">
                <h2><i class="${tool.icon}"></i> ${tool.name}</h2>
                <p>${tool.desc}</p>
              </div>
              <div class="result-box error">‚ö†Ô∏è Tool UI not implemented. Please try another tool.</div>
              <button class="btn btn-outline" onclick="hideTool()"><i class="fas fa-arrow-left"></i> Back to Tools</button>
            </div>
          `;
      }

      document.getElementById('toolContainer').innerHTML = html;
      window.scrollTo({ top: document.getElementById('toolContainer').offsetTop - 40, behavior: 'smooth' });

      // Init special behaviors
      if (toolId === 'pdf-word') initPdfDrop();
      if (toolId === 'password-check') {
        const passInput = document.getElementById('passwordInput');
        if (passInput) passInput.addEventListener('input', checkPasswordStrength);
      }
      if (toolId === 'timezone-conv') {
        const now = new Date();
        document.getElementById('localTime').value = now.toISOString().slice(0,16);
      }
    }

    // =============== ALL TOOL LOGIC ===============
    function checkSiteStatus() {
      const input = document.getElementById('urlInput').value.trim();
      const resultDiv = document.getElementById('downResult');
      if (!input) { 
        resultDiv.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter a website URL</div>`; 
        return; 
      }
      let url = input.match(/^https?:\/\//) ? input : 'https://' + input;
      resultDiv.innerHTML = '<div class="result-box">üîç Checking website status...</div>';
      fetch(url, { mode: 'no-cors' })
        .then(() => resultDiv.innerHTML = `<div class="result-box success">‚úÖ <strong>${input}</strong> is UP and running!</div>`)
        .catch(() => {
          const img = new Image();
          img.onload = () => resultDiv.innerHTML = `<div class="result-box success">‚úÖ <strong>${input}</strong> appears to be UP.</div>`;
          img.onerror = () => resultDiv.innerHTML = `<div class="result-box error">‚ùå <strong>${input}</strong> may be DOWN or unreachable.</div>`;
          img.src = url + '/favicon.ico?' + Date.now();
        });
    }

    function calculateMeetingCost() {
      const rate = parseFloat(document.getElementById('hourlyRate').value);
      const attendees = parseInt(document.getElementById('attendees').value);
      const duration = parseFloat(document.getElementById('duration').value);
      const result = document.getElementById('meetingResult');
      if (rate > 0 && attendees > 0 && duration > 0) {
        const cost = ((rate / 60) * duration * attendees).toFixed(2);
        result.innerHTML = `<div class="result-box success">üí∞ This meeting costs <strong>$${cost}</strong>.<br>Consider: Could this be an email?</div>`;
      } else result.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter valid numbers.</div>`;
    }

    function getTimezoneOptions() {
      const timezones = [
        'UTC', 'America/New_York', 'America/Los_Angeles', 'Europe/London',
        'Europe/Paris', 'Asia/Tokyo', 'Asia/Kolkata', 'Australia/Sydney'
      ];
      return timezones.map(tz => `<option value="${tz}">${tz}</option>`).join('');
    }

    function convertTime() {
      try {
        const localTime = document.getElementById('localTime').value;
        const fromTz = document.getElementById('fromTz').value;
        const toTz = document.getElementById('toTz').value;
        if (!localTime) { document.getElementById('tzResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please select a time.</div>`; return; }
        const dt = new Date(localTime);
        const fromTime = dt.toLocaleString('en-US', { timeZone: fromTz });
        const toTime = dt.toLocaleString('en-US', { timeZone: toTz });
        document.getElementById('tzResult').innerHTML = `
          <div class="result-box">
            <strong>${fromTz}:</strong> ${fromTime}<br>
            <strong>${toTz}:</strong> ${toTime}
          </div>
        `;
      } catch (e) {
        document.getElementById('tzResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Invalid timezone selection.</div>`;
      }
    }

    function prioritizeTasks() {
      const tasks = document.getElementById('taskInput').value.split('\n').filter(t => t.trim());
      if (tasks.length === 0) { document.getElementById('taskResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter at least one task.</div>`; return; }
      const urgent = tasks.slice(0, Math.ceil(tasks.length/3));
      const important = tasks.slice(Math.ceil(tasks.length/3), Math.ceil(2*tasks.length/3));
      const neither = tasks.slice(Math.ceil(2*tasks.length/3));
      let html = '<div class="result-box"><h3 style="margin-bottom:12px;">Your Prioritized Tasks:</h3>';
      if (urgent.length) html += `<h4 style="color:#e53e3e;">üî• Urgent & Important</h4><ul>${urgent.map(t => `<li>${t}</li>`).join('')}</ul>`;
      if (important.length) html += `<h4 style="color:#d69e2e;">üìÖ Important, Not Urgent</h4><ul>${important.map(t => `<li>${t}</li>`).join('')}</ul>`;
      if (neither.length) html += `<h4 style="color:#48bb78;">üóëÔ∏è Delegate or Eliminate</h4><ul>${neither.map(t => `<li>${t}</li>`).join('')}</ul>`;
      html += '</div>';
      document.getElementById('taskResult').innerHTML = html;
    }

    function estimateReadTime() {
      const text = document.getElementById('readText').value;
      const words = text.trim().split(/\s+/).filter(w => w).length;
      const mins = Math.ceil(words / 200);
      const result = document.getElementById('readResult');
      if (words > 0) {
        result.innerHTML = `<div class="result-box success">${words} words ¬∑ Estimated read time: <strong>~${mins} minute${mins !== 1 ? 's' : ''}</strong></div>`;
      } else {
        result.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter some text.</div>`;
      }
    }

    async function hashPassword(password) {
      const enc = new TextEncoder();
      const hash = await crypto.subtle.digest('SHA-1', enc.encode(password));
      return Array.from(new Uint8Array(hash)).map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();
    }

    async function checkPasswordBreached(password) {
      const hash = await hashPassword(password);
      const prefix = hash.substring(0, 5);
      const suffix = hash.substring(5);
      const res = await fetch(`https://api.pwnedpasswords.com/range/${prefix}`);
      const txt = await res.text();
      const lines = txt.split('\n');
      for (const line of lines) {
        const [hash, count] = line.split(':');
        if (hash === suffix) return parseInt(count, 10);
      }
      return 0;
    }

    function checkPasswordStrength() {
      const pass = document.getElementById('passwordInput').value;
      const res = document.getElementById('passwordResult');
      if (!pass) { res.innerHTML = ''; return; }
      let score = 0;
      if (pass.length >= 8) score++;
      if (/[a-z]/.test(pass)) score++;
      if (/[A-Z]/.test(pass)) score++;
      if (/[0-9]/.test(pass)) score++;
      if (/[^A-Za-z0-9]/.test(pass)) score++;
      const strength = score >= 4 ? 'Strong' : score >= 3 ? 'Medium' : 'Weak';
      const color = score >= 4 ? '#2f855a' : score >= 3 ? '#d69e2e' : '#e53e3e';
      res.innerHTML = `<div class="result-box" style="border-left-color:${color};">Strength: <strong style="color:${color};">${strength}</strong><br>Checking for breaches...</div>`;
      checkPasswordBreached(pass).then(count => {
        if (count === 0) {
          res.innerHTML += `<div class="result-box success">‚úÖ This password has never been found in known data breaches.</div>`;
        } else {
          res.innerHTML += `<div class="result-box error">‚ö†Ô∏è This password was found in <strong>${count.toLocaleString()}</strong> breaches. <strong>Do not use it!</strong></div>`;
        }
      });
    }

    async function checkEmailLeak() {
      const email = document.getElementById('emailInput').value.trim();
      const res = document.getElementById('emailResult');
      if (!email || !email.includes('@')) { res.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter a valid email address.</div>`; return; }
      res.innerHTML = '<div class="result-box">üîç Checking breach databases...</div>';
      try {
        const response = await fetch(`https://haveibeenpwned.com/api/v3/breachedaccount/${encodeURIComponent(email)}`, {
          headers: { 'User-Agent': 'DailyUtil' }
        });
        if (response.status === 200) {
          const breaches = await response.json();
          res.innerHTML = `<div class="result-box error">‚ö†Ô∏è Your email was found in <strong>${breaches.length}</strong> breaches:<br>${breaches.map(b => `<strong>${b.Name}</strong> (${new Date(b.BreachDate).getFullYear()})`).join(', ')}</div>`;
        } else if (response.status === 404) {
          res.innerHTML = `<div class="result-box success">‚úÖ Good news! Your email was not found in any known data breaches.</div>`;
        } else {
          res.innerHTML = `<div class="result-box error">‚ö†Ô∏è Rate limited by HaveIBeenPwned. Try again in a few minutes.</div>`;
        }
      } catch (e) {
        res.innerHTML = `<div class="result-box error">‚ö†Ô∏è Could not check due to browser security restrictions (CORS). Try a different browser or check directly on haveibeenpwned.com.</div>`;
      }
    }

    function getLuminance(hex) {
      const r = parseInt(hex.slice(1, 3), 16) / 255;
      const g = parseInt(hex.slice(3, 5), 16) / 255;
      const b = parseInt(hex.slice(5, 7), 16) / 255;
      const a = [r, g, b].map(c => c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4));
      return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
    }

    function checkContrast() {
      const text = document.getElementById('textColor').value;
      const bg = document.getElementById('bgColor').value;
      const l1 = getLuminance(text);
      const l2 = getLuminance(bg);
      const ratio = (Math.max(l1, l2) + 0.05) / (Math.min(l1, l2) + 0.05);
      const result = document.getElementById('contrastResult');
      const passAA = ratio >= 4.5;
      const passAAA = ratio >= 7;
      let message = '';
      if (passAAA) message = '‚úÖ Passes WCAG AAA (enhanced accessibility)';
      else if (passAA) message = '‚úÖ Passes WCAG AA (standard accessibility)';
      else message = '‚ö†Ô∏è Fails accessibility standards ‚Äî consider adjusting colors';
      result.innerHTML = `
        <div class="result-box" style="text-align:center;">
          <div style="padding:16px; background:${bg}; color:${text}; display:inline-block; margin:10px 0; border-radius:6px; font-weight:bold; font-size:1.2rem;">
            Sample Text
          </div><br>
          Contrast Ratio: <strong>${ratio.toFixed(2)}:1</strong><br>
          ${message}
        </div>
      `;
    }

    function generateRobots() {
      let lines = ['User-agent: *'];
      const allowAll = document.getElementById('allowAll').checked;
      const disallowAdmin = document.getElementById('disallowAdmin').checked;
      const disallowWp = document.getElementById('disallowWp').checked;
      const sitemap = document.getElementById('sitemapUrl').value.trim();

      if (allowAll) lines.push('Allow: /');
      if (disallowAdmin) lines.push('Disallow: /admin/');
      if (disallowWp) {
        lines.push('Disallow: /wp-admin/');
        lines.push('Disallow: /wp-includes/');
      }
      if (sitemap) lines.push(`Sitemap: ${sitemap}`);

      document.getElementById('robotsResult').innerHTML = `
        <div class="result-box">
          <h3>Your robots.txt file:</h3>
          <pre style="background:#f5f5f5;padding:12px;margin:12px 0;overflow-x:auto;">${lines.join('\n')}</pre>
          <p>‚úÖ Copy this content and save it as <code>robots.txt</code> in your website root directory.</p>
        </div>
      `;
    }

    function initPdfDrop() {
      const dropZone = document.getElementById('pdfDrop');
      const fileInput = document.getElementById('pdfFile');
      dropZone.addEventListener('click', () => fileInput.click());
      fileInput.addEventListener('change', (e) => { if (e.target.files[0]) handlePdf(e.target.files[0]); });
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(ev => {
        dropZone.addEventListener(ev, (e) => e.preventDefault(), false);
      });
      ['dragenter', 'dragover'].forEach(ev => {
        dropZone.addEventListener(ev, () => dropZone.classList.add('dragover'), false);
      });
      ['dragleave', 'drop'].forEach(ev => {
        dropZone.addEventListener(ev, () => dropZone.classList.remove('dragover'), false);
      });
      dropZone.addEventListener('drop', (e) => handlePdf(e.dataTransfer.files[0]), false);
    }

    async function handlePdf(file) {
      if (!file.type.includes('pdf')) { 
        document.getElementById('pdfResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please select a valid PDF file.</div>`; 
        return; 
      }
      const r = document.getElementById('pdfResult');
      r.innerHTML = '<div class="result-box">Loading PDF processing library...</div>';
      if (!window.pdfjsLib) {
        await loadScript('https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js');
      }
      r.innerHTML = '<div class="result-box">Extracting text from your PDF (this may take a few seconds)...</div>';
      const arrayBuf = await file.arrayBuffer();
      const pdf = await pdfjsLib.getDocument({  arrayBuf }).promise;
      let text = '';
      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();
        text += content.items.map(t => t.str).join(' ') + '\n';
      }
      const blob = new Blob([text], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = file.name.replace('.pdf', '.txt');
      a.click();
      URL.revokeObjectURL(url);
      r.innerHTML = `<div class="result-box success">‚úÖ Text successfully extracted!<br><strong>Download started automatically.</strong><br><small>If not, <a href="${url}" download="${file.name.replace('.pdf', '.txt')}">click here</a>.</small></div>`;
    }

    function encodeBase64() {
      try {
        const input = document.getElementById('base64Input').value;
        if (!input.trim()) throw new Error("Empty input");
        const encoded = btoa(unescape(encodeURIComponent(input)));
        document.getElementById('base64Result').innerHTML = `
          <div class="result-box success">
            <h3>Encoded Base64:</h3>
            <textarea readonly class="form-control" style="margin-top:10px;height:100px;">${encoded}</textarea>
          </div>
        `;
      } catch (e) {
        document.getElementById('base64Result').innerHTML = `<div class="result-box error">‚ö†Ô∏è Invalid input for Base64 encoding.</div>`;
      }
    }

    function decodeBase64() {
      try {
        const input = document.getElementById('base64Input').value;
        if (!input.trim()) throw new Error("Empty input");
        const decoded = decodeURIComponent(escape(atob(input)));
        document.getElementById('base64Result').innerHTML = `
          <div class="result-box success">
            <h3>Decoded Text:</h3>
            <textarea readonly class="form-control" style="margin-top:10px;height:100px;">${decoded}</textarea>
          </div>
        `;
      } catch (e) {
        document.getElementById('base64Result').innerHTML = `<div class="result-box error">‚ö†Ô∏è Invalid Base64 string. Make sure it's properly formatted.</div>`;
      }
    }

    function formatJSON() {
      const input = document.getElementById('jsonInput').value;
      const result = document.getElementById('jsonResult');
      try {
        const obj = JSON.parse(input);
        const formatted = JSON.stringify(obj, null, 2);
        result.innerHTML = `
          <div class="result-box success">
            <h3>Formatted JSON:</h3>
            <pre style="background:#f5f5f5;padding:12px;margin-top:10px;overflow-x:auto;">${formatted}</pre>
          </div>
        `;
      } catch (e) {
        result.innerHTML = `<div class="result-box error">‚ùå Invalid JSON: ${e.message}</div>`;
      }
    }

    function countWords() {
      const text = document.getElementById('wcText').value;
      if (!text.trim()) {
        document.getElementById('wcResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter some text to analyze.</div>`;
        return;
      }
      const words = text.trim().split(/\s+/).filter(w => w).length;
      const chars = text.replace(/\s+/g, '').length;
      const readability = Math.max(0, Math.min(100, 206.835 - 1.015 * words - 84.6 * (chars/words)));
      document.getElementById('wcResult').innerHTML = `
        <div class="result-box success">
          <h3>Text Analysis Results:</h3>
          <ul style="text-align:left; margin-top:12px; padding-left:20px;">
            <li><strong>Words:</strong> ${words}</li>
            <li><strong>Characters (no spaces):</strong> ${chars}</li>
            <li><strong>Readability Score:</strong> ${readability.toFixed(1)}/100 
              ${readability > 60 ? '(Easy to read)' : readability > 30 ? '(Average)' : '(Difficult)'}
            </li>
          </ul>
        </div>
      `;
    }

    async function generateQR() {
      const text = document.getElementById('qrText').value;
      if (!text.trim()) { 
        document.getElementById('qrResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter text to encode in the QR code.</div>`; 
        return; 
      }
      const result = document.getElementById('qrResult');
      result.innerHTML = '<div class="result-box">Generating QR code...</div>';

      if (!window.qrcode) {
        await loadScript('https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js');
      }

      const qr = qrcode(0, 'M');
      qr.addData(text);
      qr.make();
      result.innerHTML = `
        <div class="result-box success" style="text-align:center;">
          <h3>Your QR Code:</h3>
          ${qr.createImgTag(8, 16)}
          <p style="margin-top:12px;">‚úÖ Right-click the image above to save it.</p>
        </div>
      `;
    }

    function predictExam() {
      const total = parseFloat(document.getElementById('totalMarks').value);
      const scored = parseFloat(document.getElementById('scoredMarks').value);
      const passing = parseFloat(document.getElementById('passingMarks').value);
      const r = document.getElementById('examResult');
      if (total > 0 && scored >= 0 && passing > 0 && passing <= 100) {
        const percent = (scored / total) * 100;
        const passPercent = passing;
        const status = percent >= passPercent ? '‚úÖ You are likely to PASS!' : '‚ùå You may NOT pass';
        r.innerHTML = `<div class="result-box ${percent >= passPercent ? 'success' : 'error'}">
          Your score: <strong>${percent.toFixed(1)}%</strong><br>
          Passing threshold: <strong>${passPercent}%</strong><br>
          Result: <strong>${status}</strong>
        </div>`;
      } else r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter valid numbers.</div>`;
    }

    function generateCitation() {
      const type = document.getElementById('citeType').value;
      const author = (document.getElementById('citeAuthor').value || 'Author, A.').trim();
      const title = (document.getElementById('citeTitle').value || 'Title of work').trim();
      const site = (document.getElementById('citeSite').value || 'Publisher').trim();
      const dateInput = document.getElementById('citeDate').value;
      const date = dateInput ? new Date(dateInput).getFullYear() : 'n.d.';
      const url = document.getElementById('citeUrl').value;
      let citation = '';
      if (type === 'website') {
        citation = `${author} (${date}). <em>${title}</em>. ${site}. ${url}`;
      } else {
        citation = `${author} (${date}). <em>${title}</em>. ${site}.`;
      }
      document.getElementById('citeResult').innerHTML = `<div class="result-box success"><h3>Your Citation (APA 7th):</h3><blockquote style="margin:12px 0;font-style:italic;">${citation}</blockquote></div>`;
    }

    function planStudy() {
      const topics = parseInt(document.getElementById('topicsTotal').value);
      const examDate = document.getElementById('examDate').value;
      const r = document.getElementById('studyResult');
      if (!examDate || topics <= 0) { r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter valid data.</div>`; return; }
      const today = new Date();
      const exam = new Date(examDate);
      const days = Math.ceil((exam - today) / (1000 * 60 * 60 * 24));
      if (days <= 0) { 
        r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Exam date must be in the future.</div>`; 
        return; 
      }
      const perDay = Math.ceil(topics / days);
      r.innerHTML = `<div class="result-box success">
        üìö Study Plan:<br>
        Total topics: <strong>${topics}</strong><br>
        Days until exam: <strong>${days}</strong><br>
        Study <strong>${perDay} topics per day</strong> to finish on time.
      </div>`;
    }

    function checkPlagiarism() {
      const text1 = document.getElementById('plagText1').value.toLowerCase();
      const text2 = document.getElementById('plagText2').value.toLowerCase();
      const r = document.getElementById('plagResult');
      if (!text1.trim() || !text2.trim()) { r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter text in both fields.</div>`; return; }
      const words1 = new Set(text1.match(/\w+/g) || []);
      const words2 = new Set(text2.match(/\w+/g) || []);
      const common = [...words1].filter(w => words2.has(w));
      const similarity = words1.size > 0 ? (common.length / words1.size) * 100 : 0;
      r.innerHTML = `<div class="result-box ${similarity > 25 ? 'error' : 'success'}">
        Similarity: <strong>${similarity.toFixed(1)}%</strong><br>
        ${similarity > 25 ? '‚ö†Ô∏è High similarity detected ‚Äî revise your work.' : '‚úÖ Low similarity ‚Äî likely original.'}
      </div>`;
    }

    function trackDeadline() {
      const name = document.getElementById('assignmentName').value.trim();
      const due = document.getElementById('dueDate').value;
      const r = document.getElementById('deadlineResult');
      if (!name || !due) { r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter assignment name and due date.</div>`; return; }
      const today = new Date();
      const dueDate = new Date(due);
      const days = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
      if (days < 0) {
        r.innerHTML = `<div class="result-box error">‚ö†Ô∏è "${name}" was due <strong>${-days} days ago</strong>!</div>`;
      } else if (days === 0) {
        r.innerHTML = `<div class="result-box error">üö® "${name}" is due <strong>today</strong>!</div>`;
      } else {
        r.innerHTML = `<div class="result-box success">üìÖ "${name}" is due in <strong>${days} day${days !== 1 ? 's' : ''}</strong>.</div>`;
      }
    }

    function calculateWater() {
      const w = parseFloat(document.getElementById('weightKg').value);
      const a = parseFloat(document.getElementById('activity').value);
      const r = document.getElementById('waterResult');
      if (w >= 20 && w <= 300) {
        const liters = (w * 0.033 * a).toFixed(1);
        const glasses = Math.round(liters / 0.24);
        r.innerHTML = `<div class="result-box success">
          üíß Daily Water Intake Recommendation:<br>
          <strong>${liters} liters</strong> (${glasses} standard glasses) per day.
        </div>`;
      } else {
        r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter a valid weight between 20‚Äì300 kg.</div>`;
      }
    }

    function calculateBMI() {
      const h = parseFloat(document.getElementById('heightCm').value);
      const w = parseFloat(document.getElementById('weightKgBmi').value);
      const r = document.getElementById('bmiResult');
      if (h > 50 && h < 300 && w > 10 && w < 500) {
        const bmi = (w / ((h/100) ** 2)).toFixed(1);
        let category = 'Underweight';
        let color = '#48bb78';
        if (bmi < 18.5) {
          category = 'Underweight';
          color = '#ed8936';
        } else if (bmi >= 18.5 && bmi < 25) {
          category = 'Normal weight';
          color = '#48bb78';
        } else if (bmi >= 25 && bmi < 30) {
          category = 'Overweight';
          color = '#ed8936';
        } else {
          category = 'Obese';
          color = '#e53e3e';
        }
        r.innerHTML = `<div class="result-box" style="border-left-color:${color};">
          Your BMI: <strong>${bmi}</strong><br>
          Category: <strong style="color:${color};">${category}</strong>
        </div>`;
      } else {
        r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter valid height (50-300 cm) and weight (10-500 kg).</div>`;
      }
    }

    function calculateSleepTimes() {
      const wake = document.getElementById('wakeTime').value;
      const r = document.getElementById('sleepResult');
      if (!wake) { r.innerHTML = `<div class="result-box error">‚ö†Ô∏è Please select a wake-up time.</div>`; return; }
      const [hours, minutes] = wake.split(':').map(Number);
      const now = new Date();
      now.setHours(hours, minutes, 0, 0);
      let html = '<div class="result-box"><h3>Ideal Bedtimes for Full Sleep Cycles (90 min each):</h3><ul style="text-align:left;margin-top:12px;padding-left:20px;">';
      for (let i = 1; i <= 6; i++) {
        const bedtime = new Date(now.getTime() - (90 * 60000 * i));
        html += `<li>Sleep at <strong>${bedtime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</strong> for ${i} cycle${i !== 1 ? 's' : ''}</li>`;
      }
      html += '</ul></div>';
      r.innerHTML = html;
    }

    function checkCaffeine() {
      const weight = parseFloat(document.getElementById('bodyWeight').value);
      if (weight < 20) { 
        document.getElementById('caffeineResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter a valid weight.</div>`; 
        return; 
      }
      const safeLimit = Math.round(weight * 5); // mg
      let total = 0;
      if (document.getElementById('coffee').checked) total += 95;
      if (document.getElementById('tea').checked) total += 45;
      if (document.getElementById('soda').checked) total += 40;
      if (document.getElementById('energy').checked) total += 80;
      const r = document.getElementById('caffeineResult');
      if (total <= safeLimit) {
        r.innerHTML = `<div class="result-box success">
          ‚úÖ Total caffeine: <strong>${total}mg</strong><br>
          Safe limit for you: <strong>${safeLimit}mg</strong><br>
          You're within safe limits!
        </div>`;
      } else {
        r.innerHTML = `<div class="result-box error">
          ‚ö†Ô∏è Total caffeine: <strong>${total}mg</strong><br>
          Safe limit for you: <strong>${safeLimit}mg</strong><br>
          You've exceeded the recommended daily intake.
        </div>`;
      }
    }

    function calculateSteps() {
      const height = parseFloat(document.getElementById('heightCmStep').value);
      const level = document.getElementById('fitnessLevel').value;
      if (height < 100) { 
        document.getElementById('stepResult').innerHTML = `<div class="result-box error">‚ö†Ô∏è Please enter a valid height (100-250 cm).</div>`; 
        return; 
      }
      const base = 10000;
      const factor = level === 'basic' ? 0.8 : level === 'active' ? 1.2 : 1.0;
      const goal = Math.round(base * factor);
      document.getElementById('stepResult').innerHTML = `<div class="result-box success">
        üëü Your Daily Step Goal:<br>
        <strong>${goal.toLocaleString()} steps</strong> per day.
      </div>`;
    }

    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const s = document.createElement('script');
        s.src = src;
        s.onload = resolve;
        s.onerror = reject;
        document.head.appendChild(s);
      });
    }

    function hideTool() {
      document.getElementById('toolContainer').innerHTML = '';
    }

    // PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(console.warn);
      });
    }
  </script>
</body>
</html>
